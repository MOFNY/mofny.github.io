$(document).ready(function(){function o(){u.slideToggle("slow")}function t(o,t,e){return o>=t&&e>=o}function e(){htmlBody.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(o){(o.which>0||"mousedown"===o.type||"mousewheel"===o.type)&&htmlBody.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup")})}actionTaken=!1,function(o){o.scrollFollow=function(t,e){function n(){t.queue([]);var n,l=parseInt(o(window).height()),i=parseInt(o(document).scrollTop()),s=parseInt(t.cont.offset().top),a=parseInt(t.cont.prop("offsetHeight")),p=parseInt(t.prop("offsetHeight")+(parseInt(t.css("marginTop"))||0)+(parseInt(t.css("marginBottom"))||0));r&&("top"==e.relativeTo?n=t.initialOffsetTop>=i+e.offset?t.initialTop:Math.min(Math.max(-s,i-t.initialOffsetTop+t.initialTop)+e.offset,a-p-t.paddingAdjustment):"bottom"==e.relativeTo&&(n=t.initialOffsetTop+p>=i+e.offset+l?t.initialTop:Math.min(i+l-p-e.offset,a-p)),(new Date).getTime()-t.lastScroll>=e.delay-20&&t.animate({top:n},e.speed,e.easing))}t=o(t);var r=(t.css("position"),!0);if(void 0!=o.cookie)if("false"==o.cookie("scrollFollowSetting"+t.prop("id"))){var r=!1;o("#"+e.killSwitch).text(e.offText).toggle(function(){r=!0,o(this).text(e.onText),o.cookie("scrollFollowSetting"+t.prop("id"),!0,{expires:365,path:"/"}),n()},function(){r=!1,o(this).text(e.offText),t.animate({top:t.initialTop},e.speed,e.easing),o.cookie("scrollFollowSetting"+t.prop("id"),!1,{expires:365,path:"/"})})}else o("#"+e.killSwitch).text(e.onText).toggle(function(){r=!1,o(this).text(e.offText),t.animate({top:t.initialTop},0),o.cookie("scrollFollowSetting"+t.prop("id"),!1,{expires:365,path:"/"})},function(){r=!0,o(this).text(e.onText),o.cookie("scrollFollowSetting"+t.prop("id"),!0,{expires:365,path:"/"}),n()});t.cont=""==e.container?t.parent():o("#"+e.container),t.initialOffsetTop=parseInt(t.offset().top),t.initialTop=parseInt(t.css("top"))||0,t.paddingAdjustment="relative"==t.css("position")?parseInt(t.cont.css("paddingTop"))+parseInt(t.cont.css("paddingBottom")):0,o(window).scroll(function(){o.fn.scrollFollow.interval=setTimeout(function(){n()},e.delay),t.lastScroll=(new Date).getTime()}),o(window).resize(function(){o.fn.scrollFollow.interval=setTimeout(function(){n()},e.delay),t.lastScroll=(new Date).getTime()}),t.lastScroll=0,n()},o.fn.scrollFollow=function(t){return t=t||{},t.relativeTo=t.relativeTo||"top",t.speed=t.speed||500,t.offset=t.offset||0,t.easing=t.easing||"swing",t.container=t.container||this.parent().prop("id"),t.killSwitch=t.killSwitch||"killSwitch",t.onText=t.onText||"Turn Slide Off",t.offText=t.offText||"Turn Slide On",t.delay=t.delay||0,this.each(function(){new o.scrollFollow(this,t)}),this}}(jQuery),htmlBody=$("html, body");var n=0,r=500;groupArray=$(".yearGroup");var l=$(".buttonGroup"),i=$(".hideGroup"),s=$(".closeBar"),a=$("#allCloseBar"),p=[],c=[],f=!1,u=$("#hideInfo"),d=$(".overallInsertsTotal");d.on("click",function(){o()}),$.each(l,function(h){$(this).click(function(){if(sortElements=function(o,t){return o.text()<t.text()?-1:o.text()>t.text()?1:0},sortElements2=function(o,t){return t>o?-1:o>t?1:0},"All Years"==$(this).text()){f=!f;for(var g=1;g<l.length;g++)f&&0==$(groupArray[g-1]).height()?($.when($(l[g]).triggerHandler("click")).done(function(){htmlBody.animate({scrollTop:revealAllButton.offset().top-25},{duration:1e3,easing:"easeOutBack"}),console.log("Close")}),e()):!f&&$(groupArray[g-1]).height()>0&&$.when($(l[g]).triggerHandler("click")).done(function(){htmlBody.animate({scrollTop:revealAllButton.offset().top-30},{duration:0,easing:"easeOutBack"}),console.log("Open"),e()})}$(i[h-1]).slideToggle(r,function(){if(n=800,htmlBody.animate({scrollTop:$(groupArray[h-1]).offset().top-25},{duration:n,easing:"easeOutBack"}),setTimeout(function(){$(l[h]).toggleClass("float")},1200),$(groupArray[h-1]).height()>0){e(),u.hide("slow"),$(d).off("click"),$(d).addClass("overallInsertsTotal2").attr("data-content",""),a.addClass("floatCloseBar"),$(s[h]).hide(),p.splice(0,0,$(l[h])),c.splice(0,0,$(l[h]).text()),p.sort(sortElements),c.sort(sortElements2);var r,i=1500;$(l[h]).hover(function(){e();var o=$(groupArray[h-1]),n=o.offset(),s=n.top,a=(n.left,s+$(groupArray[h-1]).outerHeight()),c=$(window).width()-o.width();c=Math.abs(n.left-c);var f=0;t($(l[h]).offset().top,$(groupArray[h-1]).position().top,a)?f=500:$(l[h]).offset().top<=$(groupArray[h-1]).offset().top&&1==p.length?f=500:$(l[h]).offset().top>495&&$(l[h]).offset().top<1700&&!t($(l[h]).offset().top,$(groupArray[h-1]).position().top,a)?f=1e3:$(l[h]).offset().top>1701&&$(l[h]).offset().top<3e3&&!t($(l[h]).offset().top,$(groupArray[h-1]).position().top,a)?f=1500:$(l[h]).offset().top>3001&&$(l[h]).offset().top<6e3&&!t($(l[h]).offset().top,$(groupArray[h-1]).position().top,a)?f=2e3:$(l[h]).offset().top>6001&&!t($(l[h]).offset().top,$(groupArray[h-1]).position().top,a)?(f=2500,console.log("the slowest")):f=500,$(l[h]).hasClass("float")||(f=0,console.log("doesnt have class")),r=setTimeout(function(){htmlBody.animate({scrollTop:$(groupArray[h-1]).offset().top},f,"easeInOutCubic")},i)},function(){clearTimeout(r)}),$.each(p,function(o,t){$(p[o]).appendTo(a),console.log(p.length),arrowDown.show(),arrowUp.show(),arrowDown.prependTo(a),arrowUp.appendTo(a),p.length>7?($("float").css("width","7%"),$(t).css("width","7%"),$(p[0]).css("width","7%"),p.sort(sortElements),c.sort(sortElements2)):p.length<=7&&($(t).css("width","10%"),$("float").css("width","10%"),p.sort(sortElements),c.sort(sortElements2))})}0==$(groupArray[h-1]).height()&&($(l[h]).css("width","50%"),p.splice($.inArray($(l[h]).text(),c),1),c.splice($.inArray($(l[h]).text(),c),1),$(s[h]).show(),$(l[h]).appendTo($(s[h])),console.log(p.length),arrowDown.show(),arrowUp.show(),arrowDown.prependTo(a),arrowUp.appendTo(a)),0==p.length&&(e(),$(s[h]).removeClass("floatCloseBar"),htmlBody.animate({scrollTop:revealAllButton.offset().top-75},500),arrowDown.hide(),arrowUp.hide(),d.on("click",function(){o()}),$(d).removeClass("overallInsertsTotal2"))}),$(l[h]).toggleClass("openClose"),$(l[h]).toggleClass("openClose2")})}),revealAllButton=$("#revealAllButton");var h=$(".totalGroup"),g=$(".overallTotalGroup");li=$("li");var w=[],m=[];redAsterisks=$(".red"),overallGroup=$(groupArray).find(li).length-$(groupArray).find(redAsterisks).length,$.each(groupArray,function(o){var t=$(groupArray[o]).find(li).length,e=$(groupArray[o]).attr("data-value");w.push(e);var n=$(groupArray[o]).find(redAsterisks).length,r=t-n;m.push(r);var i=100*r/e,s="Completion Stats: "+r+"/"+e+" or "+parseFloat(i.toFixed(1))+"%";$(h[o]).text(s),$(l[o+1]).attr("title",s)});var T=0;$.each(w,function(){T+=parseFloat(this)||0});var v=100*overallGroup/T;$(g).text("Completion Stats: "+overallGroup+"/"+T+" or "+parseFloat(v.toFixed(1))+"%"),arrowDown=$(".arrow-down"),arrowUp=$(".arrow-up"),arrowDown.hide(),arrowUp.hide(),a.scrollFollow(),arrowDown.click(function(){htmlBody.animate({scrollTop:$(document).height()},600)}),arrowUp.click(function(){htmlBody.animate({scrollTop:revealAllButton.offset().top-75},500)});var y=$("#cd-nav"),A=y.find("#cd-main-nav ul");$(".cd-nav-trigger").on("click",function(){$(this).toggleClass("menu-is-open"),A.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend").toggleClass("is-visible")}),$(".arrow-up2").click(function(){$("html, body").animate({scrollTop:0},700,"easeInOutCubic")})});