$(document).ready(function(){function t(){g.slideToggle("slow")}function o(){p.css($(window).scrollTop()>$("#closeArea").offset().top?{position:"fixed"}:{position:"relative",top:"0",zIndex:"501"})}function e(t,o,e){return t>=o&&e>=t}function s(){n.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(t){(t.which>0||"mousedown"===t.type||"mousewheel"===t.type)&&n.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup")})}var n=$("html, body"),i=0,l=500,a=$(".yearGroup"),r=$(".buttonGroup"),c=$(".hideGroup"),f=$(".closeBar"),p=$("#allCloseBar"),u=[],d=[],h=!1,g=$("#hideInfo"),m=$(".overallInsertsTotal"),w=$("#revealAllButton"),T=$(".totalGroup"),v=$(".overallTotalGroup"),x=$("li"),y=[],C=$(".red"),k=$(a).find(x).length-$(a).find(C).length,E=$(".arrow-down"),b=$(".arrow-up");E.hide(),b.hide(),m.on("click",function(){t()}),$.each(r,function(T){$(this).click(function(){if(window.addEventListener("scroll",o),setTimeout(function(){$(r[T]).css({opacity:"0",transform:"scale(0.2)",width:"0"}),$(r[0]).css({opacity:"1",transform:"scale(1)",width:"50%"})},200),sortElements=function(t,o){return t.text()<o.text()?-1:t.text()>o.text()?1:0},sortElements2=function(t,o){return o>t?-1:t>o?1:0},"All Years"==$(this).text()){h=!h;for(var v=1;v<r.length;v++)h&&0==$(a[v-1]).height()?$.when($(r[v]).triggerHandler("click")).done(function(){n.animate({scrollTop:w.offset().top+100},{duration:1e3,easing:"easeOutQuad"}),console.log("Close"),s()}):!h&&$(a[v-1]).height()>0&&$.when($(r[v]).triggerHandler("click")).done(function(){n.animate({scrollTop:w.offset().top+30},{duration:0,easing:"easeOutQuad"}),console.log("Open"),s()})}$(c[T-1]).slideToggle(l,function(){if(i=800,n.animate({scrollTop:$(a[T-1]).offset().top-100},{duration:i,easing:"easeOutQuad"}),setTimeout(function(){$(r[T]).toggleClass("float")},800),$(a[T-1]).height()>0){p.css({zIndex:"501",height:"80px"}),s(),g.hide("slow"),$(m).off("click"),$(m).addClass("overallInsertsTotal2").attr("data-content",""),u.splice(0,0,$(r[T])),d.splice(0,0,$(r[T]).text()),u.sort(sortElements),d.sort(sortElements2);var l,c=1500;$(r[T]).hover(function(){s();var t=$(a[T-1]),o=t.offset(),i=o.top,f=(o.left,i+$(a[T-1]).outerHeight()),p=$(window).width()-t.width();p=Math.abs(o.left-p);var d=0;e($(r[T]).offset().top,$(a[T-1]).position().top,f)?d=500:$(r[T]).offset().top<=$(a[T-1]).offset().top&&1==u.length?d=500:$(r[T]).offset().top>495&&$(r[T]).offset().top<1700&&!e($(r[T]).offset().top,$(a[T-1]).position().top,f)?d=1e3:$(r[T]).offset().top>1701&&$(r[T]).offset().top<3e3&&!e($(r[T]).offset().top,$(a[T-1]).position().top,f)?d=1500:$(r[T]).offset().top>3001&&$(r[T]).offset().top<6e3&&!e($(r[T]).offset().top,$(a[T-1]).position().top,f)?d=2e3:$(r[T]).offset().top>6001&&!e($(r[T]).offset().top,$(a[T-1]).position().top,f)?(d=2500,console.log("the slowest")):d=500,$(r[T]).hasClass("float")||(d=0,console.log("doesnt have class")),l=setTimeout(function(){n.animate({scrollTop:$(a[T-1]).offset().top},d,"easeInOutCubic")},c)},function(){clearTimeout(l)}),$.each(u,function(t,o){$(u[t]).appendTo(p),console.log(u.length),E.show(),b.show(),E.prependTo(p),b.appendTo(p),u.length>7?(setTimeout(function(){$(o).css({opacity:"0.9",width:"7%",transform:"scale(1)"})},1e3),u.sort(sortElements),d.sort(sortElements2)):(setTimeout(function(){$(o).css({opacity:"1",transform:"scale(1)",width:"10%"})},1e3),u.sort(sortElements),d.sort(sortElements2))})}0==$(a[T-1]).height()&&($(r[T]).css({width:"50%",opacity:"1",transform:"scale(1)"}),u.splice($.inArray($(r[T]).text(),d),1),d.splice($.inArray($(r[T]).text(),d),1),$(r[T]).appendTo($(f[T]))),setTimeout(function(){0==u.length&&(s(),window.removeEventListener("scroll",o),$(r[T]).css({width:"50%",opacity:"1",transform:"scale(1)"}),p.css({zIndex:"1",height:"0"}),E.fadeOut("slow"),b.fadeOut("slow"),m.on("click",function(){t()}),$(m).removeClass("overallInsertsTotal2"))},100)}),$(r[T]).toggleClass("openClose"),$(r[T]).toggleClass("openClose2")})}),$.each(a,function(t){var o=$(a[t]).find(x).length,e=$(a[t]).attr("data-value");y.push(e);var s=$(a[t]).find(C).length,n=o-s,i=100*n/e,l="Completion Stats: "+n+"/"+e+" or "+parseFloat(i.toFixed(1))+"%";$(T[t]).text(l);$(r[t+1]).attr("title",l)});var O=0;$.each(y,function(){O+=parseFloat(this)||0});var I=100*k/O;$(v).text("Completion Stats: "+k+"/"+O+" or "+parseFloat(I.toFixed(1))+"%"),E.click(function(){n.animate({scrollTop:$(document).height()},600)}),b.click(function(){n.animate({scrollTop:w.offset().top-75},500)});var A=$("#cd-nav"),F=A.find("#cd-main-nav ul");$(".cd-nav-trigger").on("click",function(){$(this).toggleClass("menu-is-open"),F.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend").toggleClass("is-visible")}),$(".arrow-up2").click(function(){$("html, body").animate({scrollTop:0},700,"easeInOutCubic")})});