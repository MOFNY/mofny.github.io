$(document).ready(function(){function t(){g.slideToggle("slow")}function o(){p.css($(window).scrollTop()>$("#closeArea").offset().top?{position:"fixed"}:{position:"relative",top:"0",zIndex:"501"})}function e(t,o,e){return t>=o&&e>=t}function n(){s.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(t){(t.which>0||"mousedown"===t.type||"mousewheel"===t.type)&&s.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup")})}var s=$("html, body"),i=0,l=500,a=$(".yearGroup"),r=$(".buttonGroup"),c=$(".hideGroup"),f=$(".closeBar"),p=$("#allCloseBar"),u=[],d=[],h=!1,g=$("#hideInfo"),m=$(".overallInsertsTotal"),w=$("#revealAllButton"),v=$(".totalGroup"),T=$(".overallTotalGroup"),E=$("li"),x=[],y=$(".red"),C=$(a).find(E).length-$(a).find(y).length,k=$(".arrow-down"),b=$(".arrow-up");k.hide(),b.hide(),m.on("click",function(){t()}),$.each(r,function(v){$(this).on("click",function(){if($(r[v]).css({pointerEvents:"none"}),$(r[0]).css({pointerEvents:"auto"}),window.addEventListener("scroll",o),setTimeout(function(){$(r[v]).css({opacity:"0",transform:"scale(0)",width:"0"}),$(r[0]).css({opacity:"1",transform:"scale(1)",width:"50%"})},50),sortElements=function(t,o){return t.text()<o.text()?-1:t.text()>o.text()?1:0},sortElements2=function(t,o){return o>t?-1:t>o?1:0},"All Years"==$(this).text()){h=!h;for(var T=1;T<r.length;T++)h&&0==$(a[T-1]).height()?$.when($(r[T]).triggerHandler("click")).done(function(){s.animate({scrollTop:w.offset().top+100},{duration:1e3,easing:"easeOutQuad"}),console.log("Close"),n()}):!h&&$(a[T-1]).height()>0&&$.when($(r[T]).triggerHandler("click")).done(function(){s.animate({scrollTop:w.offset().top+30},{duration:0,easing:"easeOutQuad"}),console.log("Open"),n()})}$(c[v-1]).slideToggle(l,function(){if(i=800,s.animate({scrollTop:$(a[v-1]).offset().top-100},{duration:i,easing:"easeOutQuad"}),setTimeout(function(){$(r[v]).toggleClass("float")},800),$(a[v-1]).height()>0){p.css({zIndex:"501",height:"80px"}),n(),g.hide("slow"),$(m).off("click"),$(m).addClass("overallInsertsTotal2").attr("data-content",""),u.splice(0,0,$(r[v])),d.splice(0,0,$(r[v]).text()),u.sort(sortElements),d.sort(sortElements2);var l,c=1500;$(r[v]).hover(function(){n();var t=$(a[v-1]),o=t.offset(),i=o.top,f=(o.left,i+$(a[v-1]).outerHeight()),p=$(window).width()-t.width();p=Math.abs(o.left-p);var d=0;e($(r[v]).offset().top,$(a[v-1]).position().top,f)?d=500:$(r[v]).offset().top<=$(a[v-1]).offset().top&&1==u.length?d=500:$(r[v]).offset().top>495&&$(r[v]).offset().top<1700&&!e($(r[v]).offset().top,$(a[v-1]).position().top,f)?d=1e3:$(r[v]).offset().top>1701&&$(r[v]).offset().top<3e3&&!e($(r[v]).offset().top,$(a[v-1]).position().top,f)?d=1500:$(r[v]).offset().top>3001&&$(r[v]).offset().top<6e3&&!e($(r[v]).offset().top,$(a[v-1]).position().top,f)?d=2e3:$(r[v]).offset().top>6001&&!e($(r[v]).offset().top,$(a[v-1]).position().top,f)?(d=2500,console.log("the slowest")):d=500,$(r[v]).hasClass("float")||(d=0,console.log("doesnt have class")),l=setTimeout(function(){s.animate({scrollTop:$(a[v-1]).offset().top},d,"easeInOutCubic")},c)},function(){clearTimeout(l)}),$.each(u,function(t,o){$(u[t]).appendTo(p),console.log(u.length),k.show(),b.show(),k.prependTo(p),b.appendTo(p),u.length>7?(setTimeout(function(){$(o).css({opacity:"0.9",width:"7%",transform:"scale(1)",pointerEvents:"auto"})},800),u.sort(sortElements),d.sort(sortElements2)):(setTimeout(function(){$(o).css({opacity:"1",transform:"scale(1)",width:"10%",pointerEvents:"auto"})},800),u.sort(sortElements),d.sort(sortElements2))})}0==$(a[v-1]).height()&&($(r[v]).css({width:"50%",opacity:"1",transform:"scale(1)",pointerEvents:"auto"}),u.splice($.inArray($(r[v]).text(),d),1),d.splice($.inArray($(r[v]).text(),d),1),$(r[v]).appendTo($(f[v]))),setTimeout(function(){0==u.length&&(n(),window.removeEventListener("scroll",o),$(r[v]).css({width:"50%",opacity:"1",transform:"scale(1)",pointerEvents:"auto"}),p.css({zIndex:"1",height:"0"}),k.fadeOut("slow"),b.fadeOut("slow"),m.on("click",function(){t()}),$(m).removeClass("overallInsertsTotal2"))},100)}),$(r[v]).toggleClass("openClose"),$(r[v]).toggleClass("openClose2")})}),$.each(a,function(t){var o=$(a[t]).find(E).length,e=$(a[t]).attr("data-value");x.push(e);var n=$(a[t]).find(y).length,s=o-n,i=100*s/e,l="Completion Stats: "+s+"/"+e+" or "+parseFloat(i.toFixed(1))+"%";$(v[t]).text(l);$(r[t+1]).attr("title",l)});var O=0;$.each(x,function(){O+=parseFloat(this)||0});var I=100*C/O;$(T).text("Completion Stats: "+C+"/"+O+" or "+parseFloat(I.toFixed(1))+"%"),k.click(function(){s.animate({scrollTop:$(document).height()},600)}),b.click(function(){s.animate({scrollTop:w.offset().top-75},500)});var A=$("#cd-nav"),F=A.find("#cd-main-nav ul");$(".cd-nav-trigger").on("click",function(){$(this).toggleClass("menu-is-open"),F.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend").toggleClass("is-visible")}),$(".arrow-up2").click(function(){$("html, body").animate({scrollTop:0},700,"easeInOutCubic")})});